#!/usr/bin/php -q
<?php
error_reporting(0);

include __DIR__ . '/PHP-Parser/lib/bootstrap.php';
include __DIR__ . '/PHPCtags.class.php';

$options = getopt('f:',array(
    'excmd::',
    'fields::',
    'format::',
    'version',
));

if(isset($options['version'])) {
    echo <<<'EOF'
Exuberant Ctags compatiable PHP enhancement, Copyright (C) 2012 Techlive Zheng
Addresses: <techlivezheng@gmail.com>, https://github.com/techlivezheng/phpctags
EOF;
    exit;
}

$file = realpath(array_pop($argv));

if(isset($options['fields'])) {
    $options['fields'] = str_split($options['fields']);
} else {
    $options['fields'] = array('k','s');
}

$ctags = new PHPCtags($file, $options);
$ctags->export();
